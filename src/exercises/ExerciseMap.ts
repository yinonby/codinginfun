
import ExerciseMgrAdapter from "#infra/mgr/ExerciseMgrAbs";

import BptsVarsBasicConstExerciseMgr from "./bpts/vars/basics/bpts-vars-basics-const/ExerciseMgr";
import BptsVarsBasicLetExerciseMgr from "./bpts/vars/basics/bpts-vars-basics-let/ExerciseMgr";
import BptsVarsBasicNamingExerciseMgr from "./bpts/vars/basics/bpts-vars-basics-naming/ExerciseMgr";
import BptsVarsTypesArrayExerciseMgr from "./bpts/vars/types/bpts-vars-types-array/ExerciseMgr";
import BptsVarsTypesBooleanExerciseMgr from "./bpts/vars/types/bpts-vars-types-boolean/ExerciseMgr";
import BptsVarsTypesConstVsLetExerciseMgr from "./bpts/vars/types/bpts-vars-types-const-vs-let/ExerciseMgr";
import BptsVarsTypesStringExerciseMgr from "./bpts/vars/types/bpts-vars-types-string/ExerciseMgr";

import BptsOperatorsArithmeticBasicExerciseMgr from "./bpts/operators/arithmetic/bpts-operators-arithmetic-basic/ExerciseMgr";
import BptsOperatorsArithmeticCntExerciseMgr from "./bpts/operators/arithmetic/bpts-operators-arithmetic-cnt/ExerciseMgr";
import BptsOperatorsAssignmentBasicExerciseMgr from "./bpts/operators/assignment/bpts-operators-assignment-basic/ExerciseMgr";
import BptsOperatorsComparisonBasicExerciseMgr from "./bpts/operators/comparison/bpts-operators-comparison-basic/ExerciseMgr";
import BptsOperatorsLogicalBasicExerciseMgr from "./bpts/operators/logical/bpts-operators-logical-basic/ExerciseMgr";
import BptsOperatorsStringsConcatExerciseMgr from "./bpts/operators/strings/bpts-operators-strings-concat/ExerciseMgr";

import BptsFunctionsBasicsCallingExerciseMgr from "./bpts/functions/basics/bpts-functions-basics-calling/ExerciseMgr";
import BptsFunctionsBasicsDeclarationExerciseMgr from "./bpts/functions/basics/bpts-functions-basics-declaration/ExerciseMgr";
import BptsFunctionsParamsMultiExerciseMgr from "./bpts/functions/params/bpts-functions-params-multi/ExerciseMgr";
import BptsFunctionsParamsSingleExerciseMgr from "./bpts/functions/params/bpts-functions-params-single/ExerciseMgr";
import BptsFunctionsPrincipalsReuseExerciseMgr from "./bpts/functions/principals/bpts-functions-principals-reuse/ExerciseMgr";
import BptsFunctionsReturnBasicExerciseMgr from "./bpts/functions/return/bpts-functions-return-basic/ExerciseMgr";
import BptsFunctionsScopeNestedExerciseMgr from "./bpts/functions/scope/bpts-functions-scope-nested/ExerciseMgr";
import BptsFunctionsScopeOuterExerciseMgr from "./bpts/functions/scope/bpts-functions-scope-outer/ExerciseMgr";

import BptsConditionalIfBasicExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-basic/ExerciseMgr";
import BptsConditionalIfElseExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-else/ExerciseMgr";
import BptsConditionalIfElseifExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-elseif/ExerciseMgr";
import BptsConditionalIfNestedExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-nested/ExerciseMgr";
import BptsConditionalIfReturnExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-return/ExerciseMgr";
import BptsConditionalIfScopeExerciseMgr from "./bpts/conditionals/if/bpts-conditionals-if-scope/ExerciseMgr";

import BptsLoopsForOfBasicExerciseMgr from "./bpts/loops/for-of/bpts-loops-for-of-basic/ExerciseMgr";
import BptsLoopsForAfterthoughtExerciseMgr from "./bpts/loops/for/bpts-loops-for-afterthought/ExerciseMgr";
import BptsLoopsForArraysExerciseMgr from "./bpts/loops/for/bpts-loops-for-arrays/ExerciseMgr";
import BptsLoopsForBasicExerciseMgr from "./bpts/loops/for/bpts-loops-for-basic/ExerciseMgr";
import BptsLoopsForFunctionsExerciseMgr from "./bpts/loops/for/bpts-loops-for-functions/ExerciseMgr";
import BptsLoopsWhileBasicExerciseMgr from "./bpts/loops/while/bpts-loops-while-basic/ExerciseMgr";
  
import BptsClassesApiExternalVsInternalExerciseMgr from "./bpts/classes/api/bpts-classes-api-external-vs-internal/ExerciseMgr";
import BptsClassesApiGettersSettersExerciseMgr from "./bpts/classes/api/bpts-classes-api-getters-setters/ExerciseMgr";
import BptsClassesApiPrivateExerciseMgr from "./bpts/classes/api/bpts-classes-api-private/ExerciseMgr";

import BptsClassesBasicsConstructorParamsExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-constructor-params/ExerciseMgr";
import BptsClassesBasicsConstructorExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-constructor/ExerciseMgr";
import BptsClassesBasicsDefinitionExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-definition/ExerciseMgr";
import BptsClassesBasicsMethodsEditPropsExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-methods-edit-props/ExerciseMgr";
import BptsClassesBasicsMethodsMembersExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-methods-members/ExerciseMgr";
import BptsClassesBasicsMethodsExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-methods/ExerciseMgr";
import BptsClassesBasicsPropsInitExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-props-init/ExerciseMgr";
import BptsClassesBasicsPropsExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-props/ExerciseMgr";
import BptsClassesBasicsThisExerciseMgr from "./bpts/classes/basics/bpts-classes-basics-this/ExerciseMgr";

import BptsClassesInheritanceBasicExerciseMgr from "./bpts/classes/inheritance/bpts-classes-inheritance-basic/ExerciseMgr";
import BptsClassesInheritanceSuperParamsExerciseMgr from "./bpts/classes/inheritance/bpts-classes-inheritance-super-params/ExerciseMgr";
import BptsClassesInheritanceSuperExerciseMgr from "./bpts/classes/inheritance/bpts-classes-inheritance-super/ExerciseMgr";

type ExerciseMapItem = {
  [key: string]: CourseItem,
}

type CourseItem = {
  name: string,
  displayName: string,
  chapters: ChapterItem[],
}

type ChapterItem = {
  name: string,
  displayName: string,
  lessons: LessonItem[],
}

type LessonItem = {
  name: string,
  displayName: string,
  exercises: ExerciseItem[],
}

export type ExerciseItem = {
  name: string,
  exerciseMgr: ExerciseMgrAdapter,
}

export type NameItem = {
  name: string,
  displayName: string,
}

export default class ExerciseMap {
  private map: ExerciseMapItem = {
    "test": {
      "name": "test",
      "displayName": "Test",
      "chapters": [],
    },
    "bpts": {
      "name": "bpts",
      "displayName": "Basic Programming with TypeScript",
      "chapters": [
        {
          "name": "vars",
          "displayName": "Variables",
          "lessons": [
            {
              "name": "basics",
              "displayName": "Variables basics",
              "exercises": [
                {
                  "name": "bpts-vars-basics-const",
                  "exerciseMgr": new BptsVarsBasicConstExerciseMgr(),
                },
                {
                  "name": "bpts-vars-basics-naming",
                  "exerciseMgr": new BptsVarsBasicNamingExerciseMgr(),
                },
                {
                  "name": "bpts-vars-basics-let",
                  "exerciseMgr": new BptsVarsBasicLetExerciseMgr(),
                }
              ]
            },
            {
              "name": "types",
              "displayName": "Variables types",
              "exercises": [
                {
                  "name": "bpts-vars-types-string",
                  "exerciseMgr": new BptsVarsTypesStringExerciseMgr(),
                },
                {
                  "name": "bpts-vars-types-boolean",
                  "exerciseMgr": new BptsVarsTypesBooleanExerciseMgr(),
                },
                {
                  "name": "bpts-vars-types-array",
                  "exerciseMgr": new BptsVarsTypesArrayExerciseMgr(),
                },
                {
                  "name": "bpts-vars-types-const-vs-let",
                  "exerciseMgr": new BptsVarsTypesConstVsLetExerciseMgr(),
                },
              ]
            }
          ]
        },
        {
          "name": "operators",
          "displayName": "Operators",
          "lessons": [
            {
              "name": "arithmetic",
              "displayName": "Arithmetic operators",
              "exercises": [
                {
                  "name": "bpts-operators-arithmetic-basic",
                  "exerciseMgr": new BptsOperatorsArithmeticBasicExerciseMgr(),
                },
                {
                  "name": "bpts-operators-arithmetic-cnt",
                  "exerciseMgr": new BptsOperatorsArithmeticCntExerciseMgr(),
                },
              ]
            },
            {
              "name": "assignment",
              "displayName": "Assignment operators",
              "exercises": [
                {
                  "name": "bpts-operators-assignment-basic",
                  "exerciseMgr": new BptsOperatorsAssignmentBasicExerciseMgr(),
                },
              ]
            },
            {
              "name": "comparison",
              "displayName": "Comparison operators",
              "exercises": [
                {
                  "name": "bpts-operators-comparison-basic",
                  "exerciseMgr": new BptsOperatorsComparisonBasicExerciseMgr(),
                },
              ]
            },
            {
              "name": "logical",
              "displayName": "Logical operators",
              "exercises": [
                {
                  "name": "bpts-operators-logical-basic",
                  "exerciseMgr": new BptsOperatorsLogicalBasicExerciseMgr(),
                },
              ]
            },
            {
              "name": "strings",
              "displayName": "Strings operators",
              "exercises": [
                {
                  "name": "bpts-operators-strings-conact",
                  "exerciseMgr": new BptsOperatorsStringsConcatExerciseMgr(),
                },
              ]
            },
          ]
        },
        {
          "name": "functions",
          "displayName": "Functions",
          "lessons": [
            {
              "name": "basics",
              "displayName": "Functions basics",
              "exercises": [
                {
                  "name": "bpts-functions-basics-declaration",
                  "exerciseMgr": new BptsFunctionsBasicsDeclarationExerciseMgr(),
                },
                {
                  "name": "bpts-functions-basics-calling",
                  "exerciseMgr": new BptsFunctionsBasicsCallingExerciseMgr(),
                },
              ]
            },
            {
              "name": "params",
              "displayName": "Functions parameters",
              "exercises": [
                {
                  "name": "bpts-functions-params-single",
                  "exerciseMgr": new BptsFunctionsParamsSingleExerciseMgr(),
                },
                {
                  "name": "bpts-functions-params-multi",
                  "exerciseMgr": new BptsFunctionsParamsMultiExerciseMgr(),
                },
              ]
            },
            {
              "name": "return",
              "displayName": "Functions return-value",
              "exercises": [
                {
                  "name": "bpts-functions-return-basic",
                  "exerciseMgr": new BptsFunctionsReturnBasicExerciseMgr(),
                },
              ]
            },
            {
              "name": "scope",
              "displayName": "Functions scope",
              "exercises": [
                {
                  "name": "bpts-functions-scope-outer",
                  "exerciseMgr": new BptsFunctionsScopeOuterExerciseMgr(),
                },
                {
                  "name": "bpts-functions-scope-nested",
                  "exerciseMgr": new BptsFunctionsScopeNestedExerciseMgr(),
                },
              ]
            },
            {
              "name": "principals",
              "displayName": "Functions coding principals",
              "exercises": [
                {
                  "name": "bpts-functions-basics-reuse",
                  "exerciseMgr": new BptsFunctionsPrincipalsReuseExerciseMgr(),
                },
              ]
            },
          ]
        },
        {
          "name": "conditionals",
          "displayName": "Conditionals",
          "lessons": [
            {
              "name": "if",
              "displayName": "'if...else' conditionals",
              "exercises": [
                {
                  "name": "bpts-conditionals-if-basic",
                  "exerciseMgr": new BptsConditionalIfBasicExerciseMgr(),
                },
                {
                  "name": "bpts-conditionals-if-return",
                  "exerciseMgr": new BptsConditionalIfReturnExerciseMgr(),
                },
                {
                  "name": "bpts-conditionals-if-else",
                  "exerciseMgr": new BptsConditionalIfElseExerciseMgr(),
                },
                {
                  "name": "bpts-conditionals-if-elseif",
                  "exerciseMgr": new BptsConditionalIfElseifExerciseMgr(),
                },
                {
                  "name": "bpts-conditionals-if-nested",
                  "exerciseMgr": new BptsConditionalIfNestedExerciseMgr(),
                },
                {
                  "name": "bpts-conditionals-if-scope",
                  "exerciseMgr": new BptsConditionalIfScopeExerciseMgr(),
                },
              ]
            },
          ]
        },
        {
          "name": "loops",
          "displayName": "Loops",
          "lessons": [
            {
              "name": "for",
              "displayName": "'for' loops",
              "exercises": [
                {
                  "name": "bpts-loops-for-basic",
                  "exerciseMgr": new BptsLoopsForBasicExerciseMgr(),
                },
                {
                  "name": "bpts-loops-for-afterthought",
                  "exerciseMgr": new BptsLoopsForAfterthoughtExerciseMgr(),
                },
                {
                  "name": "bpts-loops-for-arrays",
                  "exerciseMgr": new BptsLoopsForArraysExerciseMgr(),
                },
                {
                  "name": "bpts-loops-for-functions",
                  "exerciseMgr": new BptsLoopsForFunctionsExerciseMgr(),
                },
              ]
            },
            {
              "name": "for-of",
              "displayName": "'for...of' loops",
              "exercises": [
                {
                  "name": "bpts-loops-for-of-basic",
                  "exerciseMgr": new BptsLoopsForOfBasicExerciseMgr(),
                },
              ]
            },
            {
              "name": "while",
              "displayName": "'while' loops",
              "exercises": [
                {
                  "name": "bpts-loops-while-basic",
                  "exerciseMgr": new BptsLoopsWhileBasicExerciseMgr(),
                },
              ]
            },
          ]
        },
        {
          "name": "classes",
          "displayName": "Classes",
          "lessons": [
            {
              "name": "basics",
              "displayName": "Basics",
              "exercises": [
                {
                  "name": "bpts-classes-basics-definition",
                  "exerciseMgr": new BptsClassesBasicsDefinitionExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-constructor",
                  "exerciseMgr": new BptsClassesBasicsConstructorExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-constructor-params",
                  "exerciseMgr": new BptsClassesBasicsConstructorParamsExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-props",
                  "exerciseMgr": new BptsClassesBasicsPropsExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-this",
                  "exerciseMgr": new BptsClassesBasicsThisExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-props-init",
                  "exerciseMgr": new BptsClassesBasicsPropsInitExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-methods",
                  "exerciseMgr": new BptsClassesBasicsMethodsExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-methods-members",
                  "exerciseMgr": new BptsClassesBasicsMethodsMembersExerciseMgr(),
                },
                {
                  "name": "bpts-classes-basics-methods-edit-props",
                  "exerciseMgr": new BptsClassesBasicsMethodsEditPropsExerciseMgr(),
                },
              ]
            },
            {
              "name": "api",
              "displayName": "API",
              "exercises": [
                {
                  "name": "bpts-classes-api-private",
                  "exerciseMgr": new BptsClassesApiPrivateExerciseMgr(),
                },
                {
                  "name": "bpts-classes-api-external-vs-internal",
                  "exerciseMgr": new BptsClassesApiExternalVsInternalExerciseMgr(),
                },
                {
                  "name": "bpts-classes-api-getters-setters",
                  "exerciseMgr": new BptsClassesApiGettersSettersExerciseMgr(),
                },
              ]
            },
            {
              "name": "inheritance",
              "displayName": "Inheritance",
              "exercises": [
                {
                  "name": "bpts-classes-inheritance-basic",
                  "exerciseMgr": new BptsClassesInheritanceBasicExerciseMgr(),
                },
                {
                  "name": "bpts-classes-inheritance-super",
                  "exerciseMgr": new BptsClassesInheritanceSuperExerciseMgr(),
                },
                {
                  "name": "bpts-classes-inheritance-super-params",
                  "exerciseMgr": new BptsClassesInheritanceSuperParamsExerciseMgr(),
                },
              ]
            },
          ]
        },
      ]
    }
  }

  getExerciseItem(courseName: string, chapterName: string,
    lessonName: string,
    exerciseName: string): ExerciseItem | null {

    if (!this.map[courseName]) {
      console.log("no course found", courseName);
      return null;
    }
    const chapter = this.map[courseName].chapters.find(e => e.name == chapterName);
    if (!chapter) {
      console.log("no chapter found", courseName, chapterName);
      return null;
    }
    const lesson = chapter.lessons.find(e => e.name == lessonName);
    if (!lesson) {
      console.log("not lesson found", courseName, chapterName, lessonName);
      return null;
    }
    const exercise = lesson.exercises.find(e => e.name == exerciseName);
    if (!exercise) {
      console.log("not exercise found", courseName, chapterName, lessonName, exerciseName);
      return null;
    }
    return exercise;
  }

  getCourses(): NameItem[] {
    return Object.keys(this.map).map(e => ({
      name: e,
      displayName: this.map[e].displayName,
    }));
  }

  getChapterNames(courseName: string): NameItem[] {
    return this.map[courseName].chapters.map(e => ({
      name: e.name,
      displayName: e.displayName,
    }));
  }

  getLessonNames(courseName: string, chapterName: string): NameItem[] {
    return this.map[courseName].chapters
      .find(e => e.name === chapterName)!.lessons
      .map(e => ({
        name: e.name,
        displayName: e.displayName,
      }));
  }

  getExerciseNames(courseName: string, chapterName: string,
    lessonName: string): NameItem[] {
    return this.map[courseName].chapters
      .find(e => e.name === chapterName)!.lessons
      .find(e => e.name === lessonName)!.exercises
      .map(e => ({
        name: e.name,
        displayName: e.exerciseMgr.getTitle(),
      }));
  }

}

